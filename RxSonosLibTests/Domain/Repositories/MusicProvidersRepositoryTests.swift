//
//  MusicProvidersRepositoryTests.swift
//  RxSonosLibTests
//
//  Created by Stefan Renne on 02/05/2018.
//  Copyright Â© 2018 Uberweb. All rights reserved.
//
// swiftlint:disable function_body_length

import XCTest
import RxSwift
import RxBlocking
import Mockingjay
@testable import RxSonosLib

class MusicProvidersRepositoryTests: XCTestCase {
    
    let musicProvidersRepository: MusicProvidersRepository = MusicProvidersRepositoryImpl()
    
    override func setUp() {
        CacheManager.shared.clear(removeLongCache: true)
    }
    
    func testItCanGetTheMusicServices() throws {
        stub(soap(call: MusicTarget.listAvailableServices), soapXml("<AvailableServiceDescriptorList>\(descriptorList.encodeString())</AvailableServiceDescriptorList><AvailableServiceListVersion>RINCON_000E58B4AE9601400:834</AvailableServiceListVersion><AvailableServiceTypeList>\(typeList.encodeString())</AvailableServiceTypeList>"))
        
        let services = try musicProvidersRepository
            .getMusicProviders(for: firstRoom())
            .toBlocking()
            .first()!
        
        XCTAssertEqual(services.count, 62)
        
        let service1 = services[0]
        XCTAssertEqual(service1.id, 270)
        XCTAssertEqual(service1.externalId, 69127)
        XCTAssertEqual(service1.name, "Relisten")
        XCTAssertEqual(service1.uri.absoluteString, "https://sonos.relisten.net/mp3")
        XCTAssertEqual(service1.type, .soundLab)
        XCTAssertEqual(service1.policy, .anonymous)
        XCTAssertEqual(service1.map?.version, 1)
        XCTAssertEqual(service1.map?.uri.absoluteString, "https://sonos.relisten.net/static/presentationmap?.xml")
        XCTAssertEqual(service1.strings?.version, 1)
        XCTAssertEqual(service1.strings?.uri.absoluteString, "https://sonos.relisten.net/static/strings.xml")
        
        let service2 = services[1]
        XCTAssertEqual(service2.id, 262)
        XCTAssertEqual(service2.externalId, 67079)
        XCTAssertEqual(service2.name, "My Cloud Home")
        XCTAssertEqual(service2.uri.absoluteString, "https://sonos.mycloud.com/musicservice")
        XCTAssertEqual(service2.type, .musicService)
        XCTAssertEqual(service2.policy, .appLink)
        XCTAssertEqual(service2.map?.version, 3)
        XCTAssertEqual(service2.map?.uri.absoluteString, "https://sonos.mycloud.com/static/presentationmap?.xml")
        XCTAssertEqual(service2.strings?.version, 3)
        XCTAssertEqual(service2.strings?.uri.absoluteString, "https://sonos.mycloud.com/static/strings.xml")
        
        let service3 = services[4]
        XCTAssertEqual(service3.id, 212)
        XCTAssertEqual(service3.externalId, 54279)
        XCTAssertEqual(service3.name, "Plex")
        XCTAssertEqual(service3.uri.absoluteString, "https://sonos.plex.tv/v2/soap")
        XCTAssertEqual(service3.type, .soundLab)
        XCTAssertEqual(service3.policy, .appLink)
        XCTAssertEqual(service3.map?.version, 3)
        XCTAssertEqual(service3.map?.uri.absoluteString, "https://sonos.plex.tv/v2/plex.20180108.xml")
        XCTAssertEqual(service3.strings?.version, 3)
        XCTAssertEqual(service3.strings?.uri.absoluteString, "https://sonos.plex.tv/v2/plexstrings.20180116.xml")
        
        let service4 = services[10]
        XCTAssertEqual(service4.id, 9)
        XCTAssertEqual(service4.externalId, 2311)
        XCTAssertEqual(service4.name, "Spotify")
        XCTAssertEqual(service4.uri.absoluteString, "https://spotify-v4.ws.sonos.com/smapi")
        XCTAssertEqual(service4.type, .musicService)
        XCTAssertEqual(service4.policy, .appLink)
        XCTAssertEqual(service4.map?.version, 22)
        XCTAssertEqual(service4.map?.uri.absoluteString, "http://sonos-pmap?.ws.sonos.com/spotify_pmap?.18.xml")
        XCTAssertEqual(service4.strings?.version, 25)
        XCTAssertEqual(service4.strings?.uri.absoluteString, "http://spotify.cdn.sonos-ws-us.com/strings.24.xml")
        
    }
    
    func testItCantGetMusicServicesWhenTheResponseIsInvalid() throws {
        stub(soap(call: MusicTarget.listAvailableServices), soapXml(""))
        
        let services = try musicProvidersRepository
            .getMusicProviders(for: firstRoom())
            .toBlocking()
            .first()!
        
        XCTAssertEqual(services.count, 0)
    }
    
}

private extension MusicProvidersRepositoryTests {
    var descriptorList: String {
        return "<Services SchemaVersion=\"1\"><Service Id=\"270\" Name=\"Relisten\" Version=\"1.1\" Uri=\"https://sonos.relisten.net/mp3\" SecureUri=\"https://sonos.relisten.net/mp3\" ContainerType=\"SoundLab\" Capabilities=\"4672\"><Policy Auth=\"Anonymous\" PollInterval=\"1200\"/><Presentation><Strings Version=\"1\" Uri=\"https://sonos.relisten.net/static/strings.xml\"/><PresentationMap Version=\"1\" Uri=\"https://sonos.relisten.net/static/presentationmap?.xml\"/></Presentation></Service><Service Id=\"262\" Name=\"My Cloud Home\" Version=\"1.1\" Uri=\"http://sonos.mycloud.com/musicservice\" SecureUri=\"https://sonos.mycloud.com/musicservice\" ContainerType=\"MService\" Capabilities=\"33281\"><Policy Auth=\"AppLink\" PollInterval=\"30\"/><Presentation><Strings Version=\"3\" Uri=\"https://sonos.mycloud.com/static/strings.xml\"/><PresentationMap Version=\"3\" Uri=\"https://sonos.mycloud.com/static/presentationmap?.xml\"/></Presentation></Service><Service Id=\"272\" Name=\"Worldwide FM\" Version=\"1.1\" Uri=\"http://wwfm-sonos.nextempire.net/sonos\" SecureUri=\"https://wwfm-sonos.nextempire.net/sonos\" ContainerType=\"SoundLab\" Capabilities=\"512\"><Policy Auth=\"Anonymous\" PollInterval=\"30\"/><Presentation><Strings Version=\"1\" Uri=\"https://wwfm-sonos.nextempire.net/strings.xml\"/></Presentation></Service><Service Id=\"271\" Name=\"IDAGIO\" Version=\"1.1\" Uri=\"http://idg-prod-sonos.herokuapp.com/smapi/action\" SecureUri=\"https://idg-prod-sonos.herokuapp.com/smapi/action\" ContainerType=\"SoundLab\" Capabilities=\"602688\"><Policy Auth=\"AppLink\" PollInterval=\"30\"/><Presentation><Strings Version=\"1\" Uri=\"https://idg-prod-sonos.herokuapp.com/strings.xml\"/><PresentationMap Version=\"1\" Uri=\"https://idg-prod-sonos.herokuapp.com/presentationmap?.xml\"/></Presentation></Service><Service Id=\"212\" Name=\"Plex\" Version=\"1.1\" Uri=\"https://sonos.plex.tv/v2/soap\" SecureUri=\"https://sonos.plex.tv/v2/soap\" ContainerType=\"SoundLab\" Capabilities=\"266817\"><Policy Auth=\"AppLink\" PollInterval=\"30\"/><Presentation><Strings Version=\"3\" Uri=\"https://sonos.plex.tv/v2/plexstrings.20180116.xml\"/><PresentationMap Version=\"3\" Uri=\"https://sonos.plex.tv/v2/plex.20180108.xml\"/></Presentation></Service><Service Id=\"268\" Name=\"myTuner Radio\" Version=\"1.1\" Uri=\"http://sonos.mytuner.mobi/api/v2/sonos/soap\" SecureUri=\"https://sonos.mytuner.mobi/api/v2/sonos/soap\" ContainerType=\"MService\" Capabilities=\"513\"><Policy Auth=\"Anonymous\" PollInterval=\"600\"/><Presentation><Strings Version=\"1\" Uri=\"https://static.mytuner.mobi/static/sonos/strings.xml\"/><PresentationMap Version=\"1\" Uri=\"https://static.mytuner.mobi/static/sonos/pmap?.xml\"/></Presentation></Service><Service Id=\"222\" Name=\"nugs.net\" Version=\"1.1\" Uri=\"https://sonos.nugs.net/soap/nugs\" SecureUri=\"https://sonos.nugs.net/soap/nugs\" ContainerType=\"MService\" Capabilities=\"6675\"><Policy Auth=\"UserId\" PollInterval=\"30\"/><Presentation><Strings Version=\"2\" Uri=\"https://sonos.nugs.net/sample_str.xml\"/><PresentationMap Version=\"2\" Uri=\"https://sonos.nugs.net/sample_pmap?.xml\"/></Presentation></Service><Service Id=\"221\" Name=\"LivePhish+\" Version=\"1.1\" Uri=\"https://sonos.nugs.net/soap/livephish\" SecureUri=\"https://sonos.nugs.net/soap/livephish\" ContainerType=\"MService\" Capabilities=\"6675\"><Policy Auth=\"UserId\" PollInterval=\"30\"/><Presentation><Strings Version=\"2\" Uri=\"https://sonos.nugs.net/sample_str.xml\"/><PresentationMap Version=\"2\" Uri=\"https://sonos.nugs.net/sample_pmap?.xml\"/></Presentation></Service><Service Id=\"265\" Name=\"PowerApp\" Version=\"1.1\" Uri=\"http://api.powergroup.com.tr/Sonos/\" SecureUri=\"https://api.powergroup.com.tr/Sonos/\" ContainerType=\"SoundLab\" Capabilities=\"512\"><Policy Auth=\"Anonymous\" PollInterval=\"59\"/><Presentation><Strings Version=\"1\" Uri=\"http://api.powergroup.com.tr/Sonos/Strings/\"/><PresentationMap Version=\"1\" Uri=\"http://api.powergroup.com.tr/Sonos/PresentationMap/\"/></Presentation></Service><Service Id=\"264\" Name=\"radio.net\" Version=\"1.1\" Uri=\"https://api.radio.de/sonos/v1/ws\" SecureUri=\"https://api.radio.de/sonos/v1/ws\" ContainerType=\"MService\" Capabilities=\"889409\"><Policy Auth=\"Anonymous\" PollInterval=\"30\"/><Presentation><Strings Version=\"1\" Uri=\"https://api.radio.de/sonos/v1/strings.xml\"/><PresentationMap Version=\"1\" Uri=\"https://api.radio.de/sonos/v1/presentationmap?.xml\"/></Presentation></Service><Service Id=\"9\" Name=\"Spotify\" Version=\"1.1\" Uri=\"https://spotify-v4.ws.sonos.com/smapi\" SecureUri=\"https://spotify-v4.ws.sonos.com/smapi\" ContainerType=\"MService\" Capabilities=\"1116691\"><Policy Auth=\"AppLink\" PollInterval=\"300\"/><Presentation><Strings Version=\"25\" Uri=\"http://spotify.cdn.sonos-ws-us.com/strings.24.xml\"/><PresentationMap Version=\"22\" Uri=\"http://sonos-pmap?.ws.sonos.com/spotify_pmap?.18.xml\"/></Presentation></Service><Service Id=\"235\" Name=\"Sveriges Radio\" Version=\"1.1\" Uri=\"https://sonos.playsr.com/ws\" SecureUri=\"https://sonos.playsr.com/ws\" ContainerType=\"MService\" Capabilities=\"70145\"><Policy Auth=\"Anonymous\" PollInterval=\"30\"/><Presentation><Strings Version=\"2\" Uri=\"https://sonos.playsr.com/assets/strings.xml\"/><PresentationMap Version=\"2\" Uri=\"https://sonos.playsr.com/assets/presentationmap?.xml\"/></Presentation></Service><Service Id=\"260\" Name=\"Minidisco\" Version=\"1.1\" Uri=\"http://sonos.minidisco.nl/server.php\" SecureUri=\"https://sonos.minidisco.nl/server.php\" ContainerType=\"MService\" Capabilities=\"512\"><Policy Auth=\"UserId\" PollInterval=\"3600\"/><Presentation><Strings Version=\"1\" Uri=\"http://sonos.minidisco.nl/static/strings.xml\"/><PresentationMap Version=\"1\" Uri=\"http://sonos.minidisco.nl/static/p.xml\"/></Presentation></Service><Service Id=\"230\" Name=\"NTS Radio\" Version=\"1.1\" Uri=\"http://www.nts.live/smapi\" SecureUri=\"https://www.nts.live/smapi\" ContainerType=\"MService\" Capabilities=\"512\"><Policy Auth=\"Anonymous\" PollInterval=\"30\"/><Presentation><Strings Version=\"1\" Uri=\"http://www.nts.live/smapi-strings.xml\"/><PresentationMap Version=\"1\" Uri=\"http://www.nts.live/pmap2.xml\"/></Presentation></Service><Service Id=\"174\" Name=\"TIDAL\" Version=\"1.1\" Uri=\"http://sonos.tidal.com/v1/sonos\" SecureUri=\"https://sonos.tidal.com/v1/sonos\" ContainerType=\"MService\" Capabilities=\"1083923\"><Policy Auth=\"DeviceLink\" PollInterval=\"30\"/><Presentation><Strings Version=\"4\" Uri=\"http://sonos.tidal.com/assets/xml/strings.xml\"/><PresentationMap Version=\"3\" Uri=\"http://sonos.tidal.com/assets/xml/presentation.xml\"/></Presentation></Service><Service Id=\"258\" Name=\"ä¼é¹FM\" Version=\"1.1\" Uri=\"http://api.fm.qq.com/v1/sonos/sonos_cgi\" SecureUri=\"https://api.fm.qq.com/v1/sonos/sonos_cgi\" ContainerType=\"MService\" Capabilities=\"512\"><Policy Auth=\"DeviceLink\" PollInterval=\"60\"/><Presentation><Strings Version=\"1\" Uri=\"http://api.fm.qq.com/sonos/strings.xml\"/><PresentationMap Version=\"1\" Uri=\"http://api.fm.qq.com/sonos/presentation_map?.xml\"/></Presentation></Service><Service Id=\"256\" Name=\"CBC Radio &amp; Music\" Version=\"1.1\" Uri=\"http://cbcmusic-sonos.azurewebsites.net/SonosService.svc\" SecureUri=\"https://cbcmusic-sonos.azurewebsites.net/SonosService.svc\" ContainerType=\"MService\" Capabilities=\"594496\"><Policy Auth=\"Anonymous\" PollInterval=\"300\"/><Presentation><Strings Version=\"1\" Uri=\"http://cbcmusic-sonos.azurewebsites.net/strings.xml\"/><PresentationMap Version=\"1\" Uri=\"http://cbcmusic-sonos.azurewebsites.net/presentation_map?.xml\"/></Presentation></Service><Service Id=\"151\" Name=\"Google Play Music\" Version=\"1.1\" Uri=\"https://mclients.googleapis.com/music/sonos/wsf/smapi\" SecureUri=\"https://mclients.googleapis.com/music/sonos/wsf/smapi\" ContainerType=\"MService\" Capabilities=\"98899\"><Policy Auth=\"DeviceLink\" PollInterval=\"60\"/><Presentation><Strings Version=\"10\" Uri=\"https://mclients.googleapis.com/music/sonos/strings.xml\"/><PresentationMap Version=\"15\" Uri=\"https://www.gstatic.com/play/music/sonosfe/pmap?.xml\"/></Presentation></Service><Service Id=\"204\" Name=\"Apple Music\" Version=\"1.1\" Uri=\"https://sonos-music.apple.com/ws/SonosSoap\" SecureUri=\"https://sonos-music.apple.com/ws/SonosSoap\" ContainerType=\"MService\" Capabilities=\"3117633\"><Policy Auth=\"AppLink\" PollInterval=\"60\"/><Presentation><Strings Version=\"22\" Uri=\"https://sonos-music.apple.com/xml/strings.xml\"/><PresentationMap Version=\"19\" Uri=\"http://sonos-pmap?.ws.sonos.com/applemusicbrand_pmap3.xml\"/></Presentation></Service><Service Id=\"237\" Name=\"storePlay\" Version=\"1.1\" Uri=\"http://api.storeplay.com.au/sonos/SonosService.asmx\" SecureUri=\"https://api.storeplay.com.au/sonos/SonosService.asmx\" ContainerType=\"MService\" Capabilities=\"328193\"><Policy Auth=\"UserId\" PollInterval=\"3600\"/><Presentation><Strings Version=\"1\" Uri=\"https://api.storeplay.com.au/sonos/Strings.xml\"/><PresentationMap Version=\"1\" Uri=\"https://api.storeplay.com.au/sonos/Presentation.xml\"/></Presentation></Service><Service Id=\"13\" Name=\"Stitcher SmartRadio\" Version=\"1.1\" Uri=\"https://www.stitcher.com/Service/Sonos/Sonos.php\" SecureUri=\"https://www.stitcher.com/Service/Sonos/Sonos.php\" ContainerType=\"MService\" Capabilities=\"579\"><Policy Auth=\"UserId\" PollInterval=\"60\"/><Presentation><Strings Version=\"3\" Uri=\"https://www.stitcher.com/Service/Sonos/stitcher_string.xml\"/><PresentationMap Version=\"8\" Uri=\"http://sonos-pmap?.ws.sonos.com/stitcher_pmap?.7.xml\"/></Presentation></Service><Service Id=\"228\" Name=\"JUKE NL\" Version=\"1.1\" Uri=\"http://538-smapi.api.247e.com/musicopen.svc\" SecureUri=\"https://538-smapi.api.247e.com/musicopen.svc\" ContainerType=\"MService\" Capabilities=\"625235\"><Policy Auth=\"DeviceLink\" PollInterval=\"30\"/><Presentation><Strings Version=\"1\" Uri=\"http://538-smapi.api.247e.com/assets/translations.xml\"/><PresentationMap Version=\"1\" Uri=\"http://538-smapi.api.247e.com/assets/maps-001.xml\"/></Presentation></Service><Service Id=\"234\" Name=\"deliver.media\" Version=\"1.1\" Uri=\"http://sonos.deliver.media/musicservice\" SecureUri=\"https://sonos.deliver.media/musicservice\" ContainerType=\"MService\" Capabilities=\"512\"><Policy Auth=\"DeviceLink\" PollInterval=\"30\"/><Presentation><Strings Version=\"1\" Uri=\"https://sonos.deliver.media/static/strings.xml\"/><PresentationMap Version=\"1\" Uri=\"https://sonos.deliver.media/static/presentationmap?.xml\"/></Presentation></Service><Service Id=\"164\" Name=\"Saavn\" Version=\"1.1\" Uri=\"http://www.saavn.com/apps/sonos/SonosAPI.php\" SecureUri=\"https://www.saavn.com/apps/sonos/SonosAPI.php\" ContainerType=\"MService\" Capabilities=\"12865\"><Policy Auth=\"DeviceLink\" PollInterval=\"120\"/><Presentation><Strings Version=\"4\" Uri=\"http://www.saavn.com/apps/sonos/1.0/strings.xml\"/><PresentationMap Version=\"5\" Uri=\"http://www.saavn.com/apps/sonos/1.0/pmap?.xml\"/></Presentation></Service><Service Id=\"233\" Name=\"Pocket Casts\" Version=\"1.1\" Uri=\"http://integrations.pocketcasts.com/service/smapi\" SecureUri=\"https://integrations.pocketcasts.com/service/smapi\" ContainerType=\"MService\" Capabilities=\"1028672\"><Policy Auth=\"AppLink\" PollInterval=\"30\"/><Presentation><Strings Version=\"1\" Uri=\"http://integrations.pocketcasts.com/strings.xml\"/><PresentationMap Version=\"1\" Uri=\"http://integrations.pocketcasts.com/presentationmap?.xml\"/></Presentation></Service><Service Id=\"254\" Name=\"TuneIn\" Version=\"1.1\" Uri=\"http://legato.radiotime.com/Radio.asmx\" SecureUri=\"http://legato.radiotime.com/Radio.asmx\" ContainerType=\"MService\" Capabilities=\"4160\"><Policy Auth=\"Anonymous\" PollInterval=\"0\"/><Presentation><PresentationMap Version=\"3\" Uri=\"http://opml.radiotime.com/assets/sonos/map?.xml\"/></Presentation></Service><Service Id=\"231\" Name=\"Wolfgang&apos;s Music\" Version=\"1.1\" Uri=\"https://moapi.wolfgangs.com/ws/wolfgangs.asmx\" SecureUri=\"https://moapi.wolfgangs.com/ws/wolfgangs.asmx\" ContainerType=\"MService\" Capabilities=\"537153\"><Policy Auth=\"UserId\" PollInterval=\"600\"/><Presentation><Strings Version=\"1\" Uri=\"https://moapi.wolfgangs.com/ws/stringtable-wolfgangs.xml\"/><PresentationMap Version=\"1\" Uri=\"https://moapi.wolfgangs.com/ws/pmap-wolfgangs.xml\"/></Presentation></Service><Service Id=\"2\" Name=\"Deezer\" Version=\"1.1\" Uri=\"http://api.deezer.com/sonos\" SecureUri=\"https://api.deezer.com/sonos\" ContainerType=\"MService\" Capabilities=\"2643\"><Policy Auth=\"UserId\" PollInterval=\"60\"/><Presentation><Strings Version=\"11\" Uri=\"http://files.deezer.com/xml/sonos_string_tables.xml\"/><PresentationMap Version=\"11\" Uri=\"http://files.deezer.com/xml/sonos_pmap?.xml\"/></Presentation></Service><Service Id=\"203\" Name=\"Napster\" Version=\"1.1\" Uri=\"http://sonosapi-napster-ns.rhapsody.com/smapi\" SecureUri=\"https://sonosapi-napster.rhapsody.com/smapi\" ContainerType=\"MService\" Capabilities=\"595\"><Policy Auth=\"UserId\" PollInterval=\"60\"/><Presentation><Strings Version=\"7\" Uri=\"http://static.rhap.com/sonos-api/napster/service_strings.4.xml\"/><PresentationMap Version=\"7\" Uri=\"http://static.rhap.com/sonos-api/napster/service_pmap?.4.xml\"/></Presentation></Service><Service Id=\"160\" Name=\"SoundCloud\" Version=\"1.1\" Uri=\"https://soundcloud-go.ws.sonos.com/smapi\" SecureUri=\"https://soundcloud-go.ws.sonos.com/smapi\" ContainerType=\"MService\" Capabilities=\"4611\"><Policy Auth=\"DeviceLink\" PollInterval=\"30\"/><Presentation><Strings Version=\"14\" Uri=\"http://soundcloud-static.ws.sonos.com/strings.3.xml\"/><PresentationMap Version=\"14\" Uri=\"http://soundcloud-static.ws.sonos.com/pmap?.14.xml\"/></Presentation></Service><Service Id=\"157\" Name=\"Bandcamp\" Version=\"1.1\" Uri=\"http://sns.bandcamp.com/api/sonos/2/sonos_api\" SecureUri=\"https://sns.bandcamp.com/api/sonos/2/sonos_api\" ContainerType=\"MService\" Capabilities=\"513\"><Policy Auth=\"DeviceLink\" PollInterval=\"60\"/><Presentation><Strings Version=\"2\" Uri=\"http://bandcamp.com/api/sonos/2/sonos_stringtable.xml\"/><PresentationMap Version=\"2\" Uri=\"http://bandcamp.com/api/sonos/2/sonos_presentationmap?.xml\"/></Presentation></Service><Service Id=\"226\" Name=\"Storytel\" Version=\"1.1\" Uri=\"http://sonosapi.storytel.com/sonos/1.0\" SecureUri=\"https://sonosapi.storytel.com/sonos/1.0\" ContainerType=\"MService\" Capabilities=\"636481\"><Policy Auth=\"UserId\" PollInterval=\"30\"/><Presentation><Strings Version=\"1\" Uri=\"http://sonosapi.storytel.com/sonos-static/1.0/strings.xml\"/><PresentationMap Version=\"1\" Uri=\"http://sonosapi.storytel.com/sonos-static/1.0/pm.xml\"/></Presentation></Service><Service Id=\"218\" Name=\"Soundsuit.fm\" Version=\"1.1\" Uri=\"http://soundsuit.fm/smapi\" SecureUri=\"https://soundsuit.fm/smapi\" ContainerType=\"MService\" Capabilities=\"512\"><Policy Auth=\"UserId\" PollInterval=\"1\"/><Presentation><Strings Version=\"1\" Uri=\"http://soundsuit.fm/public/strings.xml\"/><PresentationMap Version=\"2\" Uri=\"http://soundsuit.fm/public/pmap?.xml\"/></Presentation></Service><Service Id=\"192\" Name=\"focus@will\" Version=\"1.1\" Uri=\"https://www.focusatwill.com/sonos/action\" SecureUri=\"https://www.focusatwill.com/sonos/action\" ContainerType=\"MService\" Capabilities=\"5632\"><Policy Auth=\"UserId\" PollInterval=\"3600\"/><Presentation><Strings Version=\"4\" Uri=\"https://cdn-images.focusatwill.com/sonos/stringtable.xml\"/><PresentationMap Version=\"4\" Uri=\"https://cdn-images.focusatwill.com/sonos/presentation_map?.xml\"/></Presentation></Service><Service Id=\"224\" Name=\"HitsNL\" Version=\"1.1\" Uri=\"https://external.unplug.de/8/sonos?ws=1\" SecureUri=\"https://external.unplug.de/8/sonos?ws=1\" ContainerType=\"MService\" Capabilities=\"2579\"><Policy Auth=\"UserId\" PollInterval=\"30\"/><Presentation><Strings Version=\"1\" Uri=\"https://external.unplug.de/sonos/strings.xml\"/><PresentationMap Version=\"1\" Uri=\"https://external.unplug.de/sonos/presentationmap?.xml\"/></Presentation></Service><Service Id=\"223\" Name=\"RauteMusik.FM\" Version=\"1.1\" Uri=\"http://sonos-smapi.rautemusik.fm/smapi\" SecureUri=\"https://sonos-smapi.rautemusik.fm/smapi\" ContainerType=\"MService\" Capabilities=\"513\"><Policy Auth=\"Anonymous\" PollInterval=\"3600\"/><Presentation><Strings Version=\"1\" Uri=\"http://sonos-smapi.rautemusik.fm/static/strings.xml\"/><PresentationMap Version=\"1\" Uri=\"http://sonos-smapi.rautemusik.fm/static/presentationmap?.xml\"/></Presentation></Service><Service Id=\"219\" Name=\"Audiobooks.com\" Version=\"1.1\" Uri=\"https://api.audiobooks.com/api/v2/sonos/soap\" SecureUri=\"https://api.audiobooks.com/api/v2/sonos/soap\" ContainerType=\"MService\" Capabilities=\"4672\"><Policy Auth=\"UserId\" PollInterval=\"60\"/><Presentation><Strings Version=\"2\" Uri=\"http://www.audiobooks.com/sonos_service_strings.xml\"/></Presentation></Service><Service Id=\"33\" Name=\"Murfie\" Version=\"1.1\" Uri=\"http://sonos.murfie.com/\" SecureUri=\"https://sonos.murfie.com/\" ContainerType=\"MService\" Capabilities=\"513\"><Policy Auth=\"UserId\" PollInterval=\"60\"/><Presentation><Strings Version=\"5\" Uri=\"http://sonos.murfie.com/strings.xml\"/><PresentationMap Version=\"5\" Uri=\"http://sonos.murfie.com/presentation_map?.xml\"/></Presentation></Service><Service Id=\"184\" Name=\"Stingray Music\" Version=\"1.1\" Uri=\"http://sonos.stingray.com/ws/Sonos\" SecureUri=\"https://sonos.stingray.com/ws/Sonos\" ContainerType=\"MService\" Capabilities=\"295427\"><Policy Auth=\"DeviceLink\" PollInterval=\"600\"/><Presentation><Strings Version=\"3\" Uri=\"http://vip-resource.galaxie.ca/2/Sonos/XML/strings.xml\"/><PresentationMap Version=\"3\" Uri=\"http://vip-resource.galaxie.ca/2/Sonos/XML/pm.xml\"/></Presentation></Service><Service Id=\"193\" Name=\"Tunify for Business\" Version=\"1.1\" Uri=\"http://api.tunify.com/Sonos/services/Sonos?wsdl\" SecureUri=\"https://api.tunify.com/Sonos/services/Sonos?wsdl\" ContainerType=\"MService\" Capabilities=\"8769\"><Policy Auth=\"UserId\" PollInterval=\"30\"/><Presentation><Strings Version=\"2\" Uri=\"http://api.tunify.com/Sonos/static/strings.xml\"/><PresentationMap Version=\"3\" Uri=\"http://api.tunify.com/Sonos/static/pm.xml\"/></Presentation></Service><Service Id=\"217\" Name=\"FIT Radio Workout Music\" Version=\"1.1\" Uri=\"http://www.fitradio.com/apisonos/ws\" SecureUri=\"https://www.fitradio.com/apisonos/ws\" ContainerType=\"MService\" Capabilities=\"4610\"><Policy Auth=\"DeviceLink\" PollInterval=\"120\"/><Presentation><Strings Version=\"1\" Uri=\"https://www.fitradio.com/sonos/sonos_str.xml\"/><PresentationMap Version=\"1\" Uri=\"https://www.fitradio.com/sonos/sonos_pmap?.xml\"/></Presentation></Service><Service Id=\"211\" Name=\"The Music Manager\" Version=\"1.1\" Uri=\"http://themusicmanager.eu/sonos/SonosAPI.php\" SecureUri=\"https://themusicmanager.eu/sonos/SonosAPI.php\" ContainerType=\"MService\" Capabilities=\"515\"><Policy Auth=\"UserId\" PollInterval=\"30\"/><Presentation><Strings Version=\"1\" Uri=\"http://themusicmanager.eu/sonos/lan_str.xml\"/><PresentationMap Version=\"1\" Uri=\"http://themusicmanager.eu/sonos/pmap?.xml\"/></Presentation></Service><Service Id=\"162\" Name=\"radioPup\" Version=\"1.1\" Uri=\"http://sonos.townsquaremedia.com/index.php\" SecureUri=\"https://sonos.townsquaremedia.com/index.php\" ContainerType=\"MService\" Capabilities=\"513\"><Policy Auth=\"Anonymous\" PollInterval=\"3600\"/><Presentation><Strings Version=\"1\" Uri=\"http://sonos.townsquaremedia.com/strings.xml\"/><PresentationMap Version=\"1\" Uri=\"http://sonos.townsquaremedia.com/pmap?.xml\"/></Presentation></Service><Service Id=\"181\" Name=\"Mixcloud\" Version=\"1.1\" Uri=\"https://www.mixcloud.com/sonos-app/\" SecureUri=\"https://www.mixcloud.com/sonos-app/\" ContainerType=\"MService\" Capabilities=\"2627\"><Policy Auth=\"DeviceLink\" PollInterval=\"30\"/><Presentation><Strings Version=\"5\" Uri=\"https://www.mixcloud.com/sonos-app/strings.xml\"/><PresentationMap Version=\"3\" Uri=\"https://www.mixcloud.com/sonos-app/presentation-map?.xml\"/></Presentation></Service><Service Id=\"38\" Name=\"7digital\" Version=\"1.1\" Uri=\"http://sonos-service.7digital.com/sonos.asmx\" SecureUri=\"https://sonos-service.7digital.com/sonos.asmx\" ContainerType=\"MService\" Capabilities=\"513\"><Policy Auth=\"UserId\" PollInterval=\"30\"/><Presentation><Strings Version=\"2\" Uri=\"http://sonos-service.7digital.com/stringtables.xml\"/><PresentationMap Version=\"3\" Uri=\"http://sonos-pmap?.ws.sonos.com/7digital_pmap?.3.xml\"/></Presentation></Service><Service Id=\"198\" Name=\"Anghami\" Version=\"1.1\" Uri=\"https://api.anghami.com/anghmob/SonosAPI.php\" SecureUri=\"https://api.anghami.com/anghmob/SonosAPI.php\" ContainerType=\"MService\" Capabilities=\"2627\"><Policy Auth=\"DeviceLink\" PollInterval=\"90\"/><Presentation><Strings Version=\"2\" Uri=\"http://phoenix.anghami.com/sonos/strings_20150818.xml\"/><PresentationMap Version=\"1\" Uri=\"http://phoenix.anghami.com/sonos/pmap?.xml\"/></Presentation></Service><Service Id=\"189\" Name=\"SOUNDMACHINE\" Version=\"1.1\" Uri=\"http://provider.sound-machine.com/sonosapi\" SecureUri=\"https://provider.sound-machine.com/sonosapi\" ContainerType=\"MService\" Capabilities=\"513\"><Policy Auth=\"UserId\" PollInterval=\"120\"/><Presentation><Strings Version=\"1\" Uri=\"http://provider.sound-machine.com/resources/sonosstrings.xml\"/><PresentationMap Version=\"1\" Uri=\"http://provider.sound-machine.com/resources/sonospresmap?.xml\"/></Presentation></Service><Service Id=\"169\" Name=\"Tribe of Noise\" Version=\"1.1\" Uri=\"http://sonos.tribeofnoise.com/server-v2.1.php\" SecureUri=\"https://sonos.tribeofnoise.com/server-v2.1.php\" ContainerType=\"MService\" Capabilities=\"4672\"><Policy Auth=\"DeviceLink\" PollInterval=\"3600\"/><Presentation><Strings Version=\"5\" Uri=\"http://sonos.tribeofnoise.com/strings.xml\"/><PresentationMap Version=\"4\" Uri=\"http://sonos.tribeofnoise.com/presentation_map?.xml\"/></Presentation></Service><Service Id=\"171\" Name=\"Mood Mix\" Version=\"1.1\" Uri=\"http://sonos.mix.moodmedia.com/api\" SecureUri=\"https://sonos.mix.moodmedia.com/api\" ContainerType=\"MService\" Capabilities=\"4609\"><Policy Auth=\"UserId\" PollInterval=\"60\"/><Presentation><Strings Version=\"2\" Uri=\"http://sonos.mix.moodmedia.com/strings.xml\"/><PresentationMap Version=\"2\" Uri=\"http://sonos.mix.moodmedia.com/presentation-map?.xml\"/></Presentation></Service><Service Id=\"191\" Name=\"Classical Archives\" Version=\"1.1\" Uri=\"https://api.classicalarchives.com/smapi/endpoint\" SecureUri=\"https://api.classicalarchives.com/smapi/endpoint\" ContainerType=\"MService\" Capabilities=\"1030739\"><Policy Auth=\"DeviceLink\" PollInterval=\"600\"/><Presentation><Strings Version=\"3\" Uri=\"https://api.classicalarchives.com/smapi/strings.xml\"/><PresentationMap Version=\"3\" Uri=\"https://api.classicalarchives.com/smapi/presentationmap?.xml\"/></Presentation></Service><Service Id=\"182\" Name=\"FamilyStream\" Version=\"1.1\" Uri=\"http://web.familystream.com/api/sonos_2.0.php\" SecureUri=\"https://web.familystream.com/api/sonos_2.0.php\" ContainerType=\"MService\" Capabilities=\"537153\"><Policy Auth=\"UserId\" PollInterval=\"30\"/><Presentation><Strings Version=\"4\" Uri=\"https://web.familystream.com/api/sonos_2.0/str.xml\"/><PresentationMap Version=\"3\" Uri=\"https://web.familystream.com/api/sonos_2.0/pmap?.xml\"/></Presentation></Service><Service Id=\"146\" Name=\"Daytrotter\" Version=\"1.1\" Uri=\"http://www.daytrotter.com/ws/MOAPI.asmx\" SecureUri=\"https://www.daytrotter.com/ws/MOAPI.asmx\" ContainerType=\"MService\" Capabilities=\"513\"><Policy Auth=\"UserId\" PollInterval=\"600\"/><Presentation><Strings Version=\"1\" Uri=\"http://images.daytrotter.com/sonos/dt/strings.xml\"/><PresentationMap Version=\"1\" Uri=\"http://sonos-pmap?.ws.sonos.com/daytrotter_pmap?.4.xml\"/></Presentation></Service><Service Id=\"7\" Name=\"Concert Vault\" Version=\"1.1\" Uri=\"http://www.concertvault.com/ws/MOAPI.asmx\" SecureUri=\"https://www.concertvault.com/ws/MOAPI.asmx\" ContainerType=\"MService\" Capabilities=\"513\"><Policy Auth=\"UserId\" PollInterval=\"60\"/><Presentation><Strings Version=\"3\" Uri=\"http://update-services.sonos.com/services/Str/wv.xml\"/><PresentationMap Version=\"5\" Uri=\"http://sonos-pmap?.ws.sonos.com/cv_pmap?.3.xml\"/></Presentation></Service><Service Id=\"167\" Name=\"Gaana\" Version=\"1.1\" Uri=\"http://sonosapi.gaana.com/SonosAPI.php\" SecureUri=\"http://sonosapi.gaana.com/SonosAPI.php\" ContainerType=\"MService\" Capabilities=\"577\"><Policy Auth=\"DeviceLink\" PollInterval=\"200\"/><Presentation><Strings Version=\"2\" Uri=\"http://sonosapi.gaana.com/resources/strings.xml\"/><PresentationMap Version=\"2\" Uri=\"http://sonosapi.gaana.com/resources/pmap?.xml\"/></Presentation></Service><Service Id=\"163\" Name=\"Spreaker\" Version=\"1.1\" Uri=\"http://sonos.spreaker.com/sonos/service/v1\" SecureUri=\"https://sonos.spreaker.com/sonos/service/v1\" ContainerType=\"MService\" Capabilities=\"513\"><Policy Auth=\"Anonymous\" PollInterval=\"30\"/><Presentation><Strings Version=\"1\" Uri=\"https://www.spreaker.com/sonos/string_table.xml\"/><PresentationMap Version=\"2\" Uri=\"https://www.spreaker.com/sonos/presentation_map?.xml\"/></Presentation></Service><Service Id=\"154\" Name=\"Radionomy\" Version=\"1.1\" Uri=\"http://sonos.radionomy.com/SonosService.svc\" SecureUri=\"https://sonos.radionomy.com/SonosService.svc\" ContainerType=\"MService\" Capabilities=\"513\"><Policy Auth=\"UserId\" PollInterval=\"60\"/><Presentation><Strings Version=\"1\" Uri=\"http://sonos.radionomy.com/strings.xml\"/><PresentationMap Version=\"3\" Uri=\"http://sonos-pmap?.ws.sonos.com/radionomy_pmap?.3.xml\"/></Presentation></Service><Service Id=\"150\" Name=\"RUSC\" Version=\"1.1\" Uri=\"http://www.rusc.com/sonos.asmx\" SecureUri=\"https://www.rusc.com/sonos.asmx\" ContainerType=\"MService\" Capabilities=\"512\"><Policy Auth=\"UserId\" PollInterval=\"30\"/><Presentation><Strings Version=\"1\" Uri=\"http://www.rusc.com/sonos.xml\"/><PresentationMap Version=\"1\" Uri=\"http://sonos-pmap?.s3.amazonaws.com/rusc_pmap?.1.xml\"/></Presentation></Service><Service Id=\"144\" Name=\"Calm Radio\" Version=\"1.1\" Uri=\"https://api.calmradio.com/sonos/\" SecureUri=\"https://api.calmradio.com/sonos/\" ContainerType=\"MService\" Capabilities=\"512\"><Policy Auth=\"UserId\" PollInterval=\"30\"/><Presentation><Strings Version=\"3\" Uri=\"https://api.calmradio.com/sonos/strings.xml\"/></Presentation></Service><Service Id=\"31\" Name=\"Qobuz\" Version=\"1.1\" Uri=\"http://www.qobuz.com/api.xml/0.2/sonos\" SecureUri=\"http://www.qobuz.com/api.xml/0.2/sonos\" ContainerType=\"MService\" Capabilities=\"2643\"><Policy Auth=\"UserId\" PollInterval=\"120\"/><Presentation><Strings Version=\"6\" Uri=\"http://www.qobuz.com/sonos/stringtables.xml\"/><PresentationMap Version=\"7\" Uri=\"http://sonos-pmap?.s3.amazonaws.com/qobuz_pmap?.4.xml\"/></Presentation></Service><Service Id=\"45\" Name=\"hotelradio.fm\" Version=\"1.1\" Uri=\"http://users.hotelradio.fm/sonosapi/index.php\" SecureUri=\"https://users.hotelradio.fm/sonosapi/index.php\" ContainerType=\"MService\" Capabilities=\"512\"><Policy Auth=\"UserId\" PollInterval=\"60\"/><Presentation><Strings Version=\"1\" Uri=\"https://users.hotelradio.fm/sonosapi/strings.xml\"/></Presentation></Service><Service Id=\"36\" Name=\"Hearts of Space\" Version=\"1.1\" Uri=\"http://sonos.hos.com/SOAP/Server1.2.php\" SecureUri=\"https://sonos.hos.com/SOAP/Server1.2.php\" ContainerType=\"MService\" Capabilities=\"512\"><Policy Auth=\"UserId\" PollInterval=\"1200\"/><Presentation><Strings Version=\"2\" Uri=\"http://sonos.hos.com/DATA/StringResources1.2.xml\"/><PresentationMap Version=\"2\" Uri=\"http://sonos-pmap?.ws.sonos.com/hos_pmap?.2.xml\"/></Presentation></Service><Service Id=\"24\" Name=\"DAR.fm Record Radio\" Version=\"1.1\" Uri=\"http://dar.fm/SonosServer.php\" SecureUri=\"http://dar.fm/SonosServer.php\" ContainerType=\"MService\" Capabilities=\"512\"><Policy Auth=\"UserId\" PollInterval=\"30\"/><Presentation><Strings Version=\"2\" Uri=\"http://dar.fm/Sonos.xml\"/></Presentation></Service></Services>"
    }
    
    var typeList: String {
        return  "69127,67079,69639,69383,54279,68615,56839,56583,67847,67591,2311,60167,66567,58887,44551,66055,65543,38663,52231,60679,3335,58375,59911,41991,59655,59143,519,51975,40967,40199,57863,55815,49159,57351,57095,56071,8455,47111,49415,55559,54023,41479,46343,9735,50695,48391,43271,43783,48903,46599,37383,1799,42759,41735,39431,38407,36871,7943,11527,9223,6151"
    }
}
